{"id":"9766fdcd45bca49b2fc9aba778e74c7b","js":"var item;\nvar robosem;\nvar room_checker;\nvar door_opener;\nvar res;\nvar robosem_res;\nvar room_checker_res;\nvar g_robosem_res;\nvar isworking_robosem;\nvar is_room_empty;\nvar door_opener_res;\nvar g_room_checker_res;\nvar g_door_opener_res;\nvar result;\nvar message;\nvar hue_id;\nvar hue_color;\n\nfunction welcome(robosem, room_checker, door_opener) {\n  setTimeout(function(){ Fiber(function(){  $engine.socketBroadcast('/prezi', 'prezi:office_prezi:move', {step: 6});$engine.scheduledPublish(robosem, \"play_tts\", \"std_msgs/String\", ({\"data\":'안녕하세요. 먼저 회의실을 체크할께요'}));$engine.scheduledPublish(robosem, \"robot_motion\", \"std_msgs/String\", ({\"data\":'HAPPY3'}));UDF_set_light([3, 1, 2], 'WHITE', null, null, 'WHITE');check_room(room_checker);\n    $engine.sleep(2000);$engine.socketBroadcast('/prezi', 'prezi:office_prezi:move', {step: 7});$engine.scheduledPublish(robosem, \"play_tts\", \"std_msgs/String\", ({\"data\":'빨간불이 켜진 방이 현재 사용중이고, '}));$engine.scheduledPublish(robosem, \"robot_motion\", \"std_msgs/String\", ({\"data\":'LEFTATTENTION'}));$engine.sleep(4000);$engine.scheduledPublish(robosem, \"play_tts\", \"std_msgs/String\", ({\"data\":'녹색불이 켜진 방이 비어있는 회의실 입니다.'}));$engine.scheduledPublish(robosem, \"robot_motion\", \"std_msgs/String\", ({\"data\":'RIGHTATTENTION'}));$engine.sleep(5500);if (is_room_empty == true) {\n      $engine.scheduledPublish(robosem, \"play_tts\", \"std_msgs/String\", ({\"data\":'그럼 문을 열어 놓을께요.'}));$engine.scheduledPublish(robosem, \"robot_motion\", \"std_msgs/String\", ({\"data\":'BYELEFTHAND'}));} else {\n      $engine.scheduledPublish(robosem, \"play_tts\", \"std_msgs/String\", ({\"data\":'비어있는 회의실이 없습니다. 나중에 다시 서비스를 시작해 주세요.'}));$engine.scheduledPublish(robosem, \"robot_motion\", \"std_msgs/String\", ({\"data\":'BYELEFTHAND'}));UDF_set_light([1, 2, 3], 'OFF', null, null, 'OFF');}\n    $engine.print(\"Rocon Authoring :\" + JSON.stringify('[Welcome] Welcome End'));$engine.sleep(3000);UDF_set_light([3], 'OFF', null, null, 'OFF');$engine.socketBroadcast('/prezi', 'prezi:office_prezi:move', {step: 2});$engine.sleep(8000);UDF_set_light([1, 2], 'OFF', null, null, 'OFF');isworking_robosem = false;\n  }).run(); }, 0);}\n\nfunction check_room(res) {\n  $engine.runScheduledAction(res, \"check_motion\", \"rocon_ninja_block/CheckMotionAction\", ({\"device_name\":''}), function(item){   $engine.print(\"Rocon Authoring :\" + JSON.stringify('[Welcome] Room checke result'));is_room_empty = false;\n    if (item['success'] == true) {\n      for (var result_index in item['is_detected']) {\n        result = item['is_detected'][result_index];\n        message = 'empty';\n        hue_id = 1;\n        hue_color = 'RED';\n        if (result['key'] == 'motion_detector') {\n          hue_id = 1;\n        } else if (result['key'] == 'motion_detector_2') {\n          hue_id = 2;\n        } else {\n          $engine.print(\"Rocon Authoring :\" + JSON.stringify('Unknown key'));$engine.print(\"Rocon Authoring :\" + JSON.stringify(result['key']));}\n        if (result['value'] == 'True') {\n          message = 'occupied';\n          hue_color = 'RED';\n        } else if (result['value'] == 'False') {\n          is_room_empty = true;\n          message = 'empty';\n          hue_color = 'GREEN';\n        } else {\n          $engine.print(\"Rocon Authoring :\" + JSON.stringify('Unknown value'));$engine.print(\"Rocon Authoring :\" + JSON.stringify(result['value']));}\n        $engine.print(\"Rocon Authoring :\" + JSON.stringify([result['key'],': ',message].join('')));UDF_set_light([hue_id], hue_color, null, null, hue_color);}\n    } else {\n      $engine.print(\"Rocon Authoring :\" + JSON.stringify('Room checker failure'));}\n  }, function(item){ });}\n\n\n$engine.print(\"Rocon Authoring :\" + JSON.stringify('[Welcome] Start Welcome workflow'));(function(robosem_res){ if(robosem_res){   $engine.print(\"Rocon Authoring :\" + JSON.stringify('[Welcome] Allocation robosem resource success'));isworking_robosem = false;\n  g_robosem_res = robosem_res;\n }else{   $engine.print(\"Rocon Authoring :\" + JSON.stringify('[Welcome] Allocation robosem resource failure'));} })($engine.allocateResource(\"robosem_bridge/robosem_bridge\", \"rocon:/pc/robosem_bridge#robosem_bridge/robosem_bridge\", [{\"remap_from\":\"play_tts\",\"remap_to\":\"/play_tts\"},{\"remap_from\":\"robot_motion\",\"remap_to\":\"/robot_motion\"},{\"remap_from\":\"touch_sensor_event\",\"remap_to\":\"/touch_sensor_event\"}], [{\"key\":\"robosem_ip\",\"value\":\"192.168.10.28\"}], {\"type\":\"static\",\"timeout\":\"3600000\"}));(function(room_checker_res){ if(room_checker_res){   is_room_empty = false;\n  $engine.print(\"Rocon Authoring :\" + JSON.stringify('[Welcome] Allocation room checker resource success'));g_room_checker_res = room_checker_res;\n }else{   $engine.print(\"Rocon Authoring :\" + JSON.stringify('[Welcome] Allocation room checker resource failure'));} })($engine.allocateResource(\"rocon_ninja_block/motion_checker\", \"rocon:/pc/motion_checker#rocon_ninja_block/motion_checker\", [{\"remap_from\":\"ninja_block_data\",\"remap_to\":\"/ninja_block_data\"},{\"remap_from\":\"check_motion\",\"remap_to\":\"/check_motion\"}], [], {\"type\":\"static\",\"timeout\":\"3600000\"}));(function(door_opener_res){ if(door_opener_res){   $engine.print(\"Rocon Authoring :\" + JSON.stringify('[Welcome] Allocation door opener resource success'));g_door_opener_res = door_opener_res;\n }else{   $engine.print(\"Rocon Authoring :\" + JSON.stringify('[Welcome] Allocation door opener resource failure'));} })($engine.allocateResource(\"rocon_auto_door/door_opener\", \"rocon:/pc/door_opener#rocon_auto_door/door_opener\", [{\"remap_from\":\"door_status\",\"remap_to\":\"/door_status\"},{\"remap_from\":\"door_ctrl\",\"remap_to\":\"/door_ctrl\"}], [], {\"type\":\"static\",\"timeout\":\"3600000\"}));$engine.print(\"Rocon Authoring :\" + JSON.stringify('[Welcome] All Resource allocated'));\n$engine.subscribe('/beacons', 'std_msgs/String', function(item){   $engine.print(\"Rocon Authoring :\" + JSON.stringify(String('[Welcome] Subscribe Beacons: ') + String(item['data'])));if (item['data'] == 'D0:39:72:A3:DE:75') {\n    if (isworking_robosem == false) {\n      isworking_robosem = true;\n      $engine.socketBroadcast('/prezi', 'prezi:office_prezi:move', {step: 5});welcome(g_robosem_res, g_room_checker_res, g_door_opener_res);\n    }\n  }\n });$engine.scheduledSubscribe(g_robosem_res, 'touch_sensor_event', 'std_msgs/String', function(item){   if (item['data'] == 'right') {\n    if (isworking_robosem == false) {\n      isworking_robosem = true;\n      welcome(g_robosem_res, g_room_checker_res, g_door_opener_res);\n    }\n  } else if (item['data'] == 'left') {\n    if (isworking_robosem == false) {\n      isworking_robosem = true;\n      welcome(g_robosem_res, g_room_checker_res, g_door_opener_res);\n    }\n  }\n });","xml":"<xml xmlns=\"http://www.w3.org/1999/xhtml\"><block type=\"action_speak\" id=\"1087\" inline=\"false\" x=\"-1334\" y=\"-1064\"><value name=\"VALUE\"><block type=\"text\" id=\"1088\"><field name=\"TEXT\">[Welcome] Start Welcome workflow</field></block></value><next><block type=\"ros_requester_allocate_with_block2\" id=\"1089\" inline=\"false\"><mutation extra_config=\"{&quot;timeout&quot;:&quot;250000000&quot;,&quot;remappings&quot;:[{&quot;remap_from&quot;:&quot;play_tts&quot;,&quot;remap_to&quot;:&quot;/play_tts&quot;},{&quot;remap_from&quot;:&quot;robot_motion&quot;,&quot;remap_to&quot;:&quot;/robot_motion&quot;},{&quot;remap_from&quot;:&quot;touch_sensor_event&quot;,&quot;remap_to&quot;:&quot;/touch_sensor_event&quot;}],&quot;parameters&quot;:[{&quot;key&quot;:&quot;robosem_ip&quot;,&quot;value&quot;:&quot;192.168.10.28&quot;}],&quot;rapp&quot;:&quot;robosem_bridge/robosem_bridge&quot;,&quot;uri&quot;:&quot;rocon:/pc/robosem_bridge#robosem_bridge/robosem_bridge&quot;}\"></mutation><field name=\"TYPE\">static</field><field name=\"ON_SUCCESS_PARAM\">robosem_res</field><value name=\"TIMEOUT_ALLOC\"><block type=\"ros_parameter\" id=\"1090\"><mutation></mutation><field name=\"KEY\">alloc_timeout</field></block></value><statement name=\"ON_SUCCESS\"><block type=\"action_speak\" id=\"1091\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"1092\"><field name=\"TEXT\">[Welcome] Allocation robosem resource success</field></block></value><next><block type=\"variables_set\" id=\"1093\" inline=\"true\"><field name=\"VAR\">isworking_robosem</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"1094\"><field name=\"BOOL\">FALSE</field></block></value><next><block type=\"variables_set\" id=\"1095\" inline=\"true\"><field name=\"VAR\">g_robosem_res</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"1096\"><field name=\"VAR\">robosem_res</field></block></value></block></next></block></next></block></statement><statement name=\"ON_FAIL\"><block type=\"action_speak\" id=\"1097\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"1098\"><field name=\"TEXT\">[Welcome] Allocation robosem resource failure</field></block></value></block></statement><next><block type=\"ros_requester_allocate_with_block2\" id=\"1099\" inline=\"false\"><mutation extra_config=\"{&quot;timeout&quot;:&quot;150000000&quot;,&quot;remappings&quot;:[{&quot;remap_from&quot;:&quot;ninja_block_data&quot;,&quot;remap_to&quot;:&quot;/ninja_block_data&quot;},{&quot;remap_from&quot;:&quot;check_motion&quot;,&quot;remap_to&quot;:&quot;/check_motion&quot;}],&quot;parameters&quot;:[],&quot;rapp&quot;:&quot;rocon_ninja_block/motion_checker&quot;,&quot;uri&quot;:&quot;rocon:/pc/motion_checker#rocon_ninja_block/motion_checker&quot;}\"></mutation><field name=\"TYPE\">static</field><field name=\"ON_SUCCESS_PARAM\">room_checker_res</field><value name=\"TIMEOUT_ALLOC\"><block type=\"ros_parameter\" id=\"1100\"><mutation></mutation><field name=\"KEY\">alloc_timeout</field></block></value><statement name=\"ON_SUCCESS\"><block type=\"variables_set\" id=\"1101\" inline=\"true\"><field name=\"VAR\">is_room_empty</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"1102\"><field name=\"BOOL\">FALSE</field></block></value><next><block type=\"action_speak\" id=\"1103\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"1104\"><field name=\"TEXT\">[Welcome] Allocation room checker resource success</field></block></value><next><block type=\"variables_set\" id=\"1105\" inline=\"true\"><field name=\"VAR\">g_room_checker_res</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"1106\"><field name=\"VAR\">room_checker_res</field></block></value></block></next></block></next></block></statement><statement name=\"ON_FAIL\"><block type=\"action_speak\" id=\"1107\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"1108\"><field name=\"TEXT\">[Welcome] Allocation room checker resource failure</field></block></value></block></statement><next><block type=\"ros_requester_allocate_with_block2\" id=\"1109\" inline=\"false\"><mutation extra_config=\"{&quot;timeout&quot;:&quot;15000&quot;,&quot;remappings&quot;:[{&quot;remap_from&quot;:&quot;door_status&quot;,&quot;remap_to&quot;:&quot;/door_status&quot;},{&quot;remap_from&quot;:&quot;door_ctrl&quot;,&quot;remap_to&quot;:&quot;/door_ctrl&quot;}],&quot;parameters&quot;:[],&quot;rapp&quot;:&quot;rocon_auto_door/door_opener&quot;,&quot;uri&quot;:&quot;rocon:/pc/door_opener#rocon_auto_door/door_opener&quot;}\"></mutation><field name=\"TYPE\">static</field><field name=\"ON_SUCCESS_PARAM\">door_opener_res</field><value name=\"TIMEOUT_ALLOC\"><block type=\"ros_parameter\" id=\"1110\"><mutation></mutation><field name=\"KEY\">alloc_timeout</field></block></value><statement name=\"ON_SUCCESS\"><block type=\"action_speak\" id=\"1111\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"1112\"><field name=\"TEXT\">[Welcome] Allocation door opener resource success</field></block></value><next><block type=\"variables_set\" id=\"1113\" inline=\"true\"><field name=\"VAR\">g_door_opener_res</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"1114\"><field name=\"VAR\">door_opener_res</field></block></value></block></next></block></statement><statement name=\"ON_FAIL\"><block type=\"action_speak\" id=\"1115\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"1116\"><field name=\"TEXT\">[Welcome] Allocation door opener resource failure</field></block></value></block></statement><next><block type=\"action_speak\" id=\"1117\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"1118\"><field name=\"TEXT\">[Welcome] All Resource allocated</field></block></value></block></next></block></next></block></next></block></next></block><block type=\"ros_subscribe_/beacons-com.github.robotics_in_concert.rocon_android_apps.beacon_awareness_ex.BeaconAwarenessExMainActivity\" id=\"1119\" x=\"-446\" y=\"-557\"><mutation extra=\"{&quot;client_app_name&quot;:&quot;com.github.robotics_in_concert.rocon_android_apps.beacon_awareness_ex.BeaconAwarenessExMainActivity&quot;}\"></mutation><field name=\"DO_PARAM\">item</field><statement name=\"DO\"><block type=\"action_speak\" id=\"1120\" inline=\"false\"><value name=\"VALUE\"><block type=\"text_join\" id=\"1121\" inline=\"false\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"1122\"><field name=\"TEXT\">[Welcome] Subscribe Beacons: </field></block></value><value name=\"ADD1\"><block type=\"object_item_get\" id=\"1123\"><field name=\"VAR\">item</field><field name=\"KEY\">data</field></block></value></block></value><next><block type=\"controls_if\" id=\"1124\" inline=\"false\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"1125\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"object_item_get\" id=\"1126\"><field name=\"VAR\">item</field><field name=\"KEY\">data</field></block></value><value name=\"B\"><block type=\"text\" id=\"1127\"><field name=\"TEXT\">D0:39:72:A3:DE:75</field></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\" id=\"1128\" inline=\"false\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"1129\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"1130\"><field name=\"VAR\">isworking_robosem</field></block></value><value name=\"B\"><block type=\"logic_boolean\" id=\"1131\"><field name=\"BOOL\">FALSE</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"1132\" inline=\"true\"><field name=\"VAR\">isworking_robosem</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"1133\"><field name=\"BOOL\">TRUE</field></block></value><next><block type=\"prezi_move_with_channel\" id=\"1134\"><field name=\"CHANNEL\">office_prezi</field><field name=\"STEP\">5</field><next><block type=\"procedures_callnoreturn\" id=\"1135\" inline=\"false\"><mutation name=\"welcome\"><arg name=\"robosem\"></arg><arg name=\"room_checker\"></arg><arg name=\"door_opener\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"1136\"><field name=\"VAR\">g_robosem_res</field></block></value><value name=\"ARG1\"><block type=\"variables_get\" id=\"1137\"><field name=\"VAR\">g_room_checker_res</field></block></value><value name=\"ARG2\"><block type=\"variables_get\" id=\"1138\"><field name=\"VAR\">g_door_opener_res</field></block></value></block></next></block></next></block></statement></block></statement></block></next></block></statement><next><block type=\"ros_scheduled_subscribe_touch_sensor_event\" id=\"1139\" inline=\"true\"><mutation></mutation><field name=\"DO_PARAM\">item</field><value name=\"CTX\"><block type=\"variables_get\" id=\"1140\"><field name=\"VAR\">g_robosem_res</field></block></value><statement name=\"DO\"><block type=\"controls_if\" id=\"1141\" inline=\"false\"><mutation elseif=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"1142\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"object_item_get\" id=\"1143\"><field name=\"VAR\">item</field><field name=\"KEY\">data</field></block></value><value name=\"B\"><block type=\"text\" id=\"1144\"><field name=\"TEXT\">right</field></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\" id=\"1145\" inline=\"false\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"1146\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"1147\"><field name=\"VAR\">isworking_robosem</field></block></value><value name=\"B\"><block type=\"logic_boolean\" id=\"1148\"><field name=\"BOOL\">FALSE</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"1149\" inline=\"true\"><field name=\"VAR\">isworking_robosem</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"1150\"><field name=\"BOOL\">TRUE</field></block></value><next><block type=\"procedures_callnoreturn\" id=\"1151\" inline=\"false\"><mutation name=\"welcome\"><arg name=\"robosem\"></arg><arg name=\"room_checker\"></arg><arg name=\"door_opener\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"1152\"><field name=\"VAR\">g_robosem_res</field></block></value><value name=\"ARG1\"><block type=\"variables_get\" id=\"1153\"><field name=\"VAR\">g_room_checker_res</field></block></value><value name=\"ARG2\"><block type=\"variables_get\" id=\"1154\"><field name=\"VAR\">g_door_opener_res</field></block></value></block></next></block></statement></block></statement><value name=\"IF1\"><block type=\"logic_compare\" id=\"1155\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"object_item_get\" id=\"1156\"><field name=\"VAR\">item</field><field name=\"KEY\">data</field></block></value><value name=\"B\"><block type=\"text\" id=\"1157\"><field name=\"TEXT\">left</field></block></value></block></value><statement name=\"DO1\"><block type=\"controls_if\" id=\"1158\" inline=\"false\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"1159\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"1160\"><field name=\"VAR\">isworking_robosem</field></block></value><value name=\"B\"><block type=\"logic_boolean\" id=\"1161\"><field name=\"BOOL\">FALSE</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"1162\" inline=\"true\"><field name=\"VAR\">isworking_robosem</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"1163\"><field name=\"BOOL\">TRUE</field></block></value><next><block type=\"procedures_callnoreturn\" id=\"1164\" inline=\"false\"><mutation name=\"welcome\"><arg name=\"robosem\"></arg><arg name=\"room_checker\"></arg><arg name=\"door_opener\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"1165\"><field name=\"VAR\">g_robosem_res</field></block></value><value name=\"ARG1\"><block type=\"variables_get\" id=\"1166\"><field name=\"VAR\">g_room_checker_res</field></block></value><value name=\"ARG2\"><block type=\"variables_get\" id=\"1167\"><field name=\"VAR\">g_door_opener_res</field></block></value></block></next></block></statement></block></statement></block></statement></block></next></block><block type=\"procedures_defnoreturn\" id=\"1168\" x=\"-1499\" y=\"-88\"><mutation><arg name=\"robosem\"></arg><arg name=\"room_checker\"></arg><arg name=\"door_opener\"></arg></mutation><field name=\"NAME\">welcome</field><statement name=\"STACK\"><block type=\"defer\" id=\"1451\"><statement name=\"DO\"><block type=\"prezi_move_with_channel\" id=\"1169\"><field name=\"CHANNEL\">office_prezi</field><field name=\"STEP\">6</field><next><block type=\"ros_scheduled_publish_play_tts\" id=\"1170\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"1171\"><field name=\"VAR\">robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"1172\" inline=\"false\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"1173\"><field name=\"TEXT\">안녕하세요. 먼저 회의실을 체크할께요</field></block></value></block></value><next><block type=\"ros_scheduled_publish_robot_motion\" id=\"1174\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"1175\"><field name=\"VAR\">robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"1176\" inline=\"false\" collapsed=\"true\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"1177\"><field name=\"TEXT\">HAPPY3</field></block></value></block></value><next><block type=\"udf_UDF_set_light\" id=\"1178\" inline=\"false\"><value name=\"LIGHT_IDS\"><block type=\"lists_create_with\" id=\"1179\" inline=\"false\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"math_number\" id=\"1180\"><field name=\"NUM\">3</field></block></value><value name=\"ADD1\"><block type=\"math_number\" id=\"1181\"><field name=\"NUM\">1</field></block></value><value name=\"ADD2\"><block type=\"math_number\" id=\"1182\"><field name=\"NUM\">2</field></block></value></block></value><value name=\"COLOR\"><block type=\"text\" id=\"1183\"><field name=\"TEXT\">WHITE</field></block></value><next><block type=\"procedures_callnoreturn\" id=\"1184\" inline=\"false\"><mutation name=\"check_room\"><arg name=\"res\"></arg></mutation><value name=\"ARG0\"><block type=\"variables_get\" id=\"1185\"><field name=\"VAR\">room_checker</field></block></value><next><block type=\"action_sleep\" id=\"1186\" inline=\"false\"><value name=\"VALUE\"><block type=\"math_number\" id=\"1187\"><field name=\"NUM\">2000</field></block></value><next><block type=\"prezi_move_with_channel\" id=\"1188\"><field name=\"CHANNEL\">office_prezi</field><field name=\"STEP\">7</field><next><block type=\"ros_scheduled_publish_play_tts\" id=\"1189\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"1190\"><field name=\"VAR\">robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"1191\" inline=\"false\" collapsed=\"true\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"1192\"><field name=\"TEXT\">빨간불이 켜진 방이 현재 사용중이고, </field></block></value></block></value><next><block type=\"ros_scheduled_publish_robot_motion\" id=\"1193\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"1194\"><field name=\"VAR\">robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"1195\" inline=\"false\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"1196\"><field name=\"TEXT\">LEFTATTENTION</field></block></value></block></value><next><block type=\"action_sleep\" id=\"1197\" inline=\"false\"><value name=\"VALUE\"><block type=\"math_number\" id=\"1198\"><field name=\"NUM\">4000</field></block></value><next><block type=\"ros_scheduled_publish_play_tts\" id=\"1199\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"1200\"><field name=\"VAR\">robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"1201\" inline=\"false\" collapsed=\"true\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"1202\"><field name=\"TEXT\">녹색불이 켜진 방이 비어있는 회의실 입니다.</field></block></value></block></value><next><block type=\"ros_scheduled_publish_robot_motion\" id=\"1203\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"1204\"><field name=\"VAR\">robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"1205\" inline=\"false\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"1206\"><field name=\"TEXT\">RIGHTATTENTION</field></block></value></block></value><next><block type=\"action_sleep\" id=\"1207\" inline=\"false\"><value name=\"VALUE\"><block type=\"math_number\" id=\"1208\"><field name=\"NUM\">5500</field></block></value><next><block type=\"controls_if\" id=\"1209\" inline=\"false\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"1210\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"1211\"><field name=\"VAR\">is_room_empty</field></block></value><value name=\"B\"><block type=\"logic_boolean\" id=\"1212\"><field name=\"BOOL\">TRUE</field></block></value></block></value><statement name=\"DO0\"><block type=\"ros_scheduled_publish_play_tts\" id=\"1213\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"1214\"><field name=\"VAR\">robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"1215\" inline=\"false\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"1216\"><field name=\"TEXT\">그럼 문을 열어 놓을께요.</field></block></value></block></value><next><block type=\"ros_scheduled_publish_robot_motion\" id=\"1217\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"1218\"><field name=\"VAR\">robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"1219\" inline=\"false\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"1220\"><field name=\"TEXT\">BYELEFTHAND</field></block></value></block></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"ros_scheduled_publish_play_tts\" id=\"1221\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"1222\"><field name=\"VAR\">robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"1223\" inline=\"false\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"1224\"><field name=\"TEXT\">비어있는 회의실이 없습니다. 나중에 다시 서비스를 시작해 주세요.</field></block></value></block></value><next><block type=\"ros_scheduled_publish_robot_motion\" id=\"1225\" inline=\"true\"><mutation></mutation><value name=\"CTX\"><block type=\"variables_get\" id=\"1226\"><field name=\"VAR\">robosem</field></block></value><value name=\"VALUE\"><block type=\"ros_msg_std_msgs-String\" id=\"1227\" inline=\"false\"><mutation></mutation><value name=\"DATA\"><block type=\"text\" id=\"1228\"><field name=\"TEXT\">BYELEFTHAND</field></block></value></block></value><next><block type=\"udf_UDF_set_light\" id=\"1229\" inline=\"false\"><value name=\"LIGHT_IDS\"><block type=\"lists_create_with\" id=\"1230\" inline=\"false\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"math_number\" id=\"1231\"><field name=\"NUM\">1</field></block></value><value name=\"ADD1\"><block type=\"math_number\" id=\"1232\"><field name=\"NUM\">2</field></block></value><value name=\"ADD2\"><block type=\"math_number\" id=\"1233\"><field name=\"NUM\">3</field></block></value></block></value><value name=\"COLOR\"><block type=\"text\" id=\"1234\"><field name=\"TEXT\">OFF</field></block></value></block></next></block></next></block></statement><next><block type=\"action_speak\" id=\"1235\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"1236\"><field name=\"TEXT\">[Welcome] Welcome End</field></block></value><next><block type=\"action_sleep\" id=\"1237\" inline=\"false\"><value name=\"VALUE\"><block type=\"math_number\" id=\"1238\"><field name=\"NUM\">3000</field></block></value><next><block type=\"udf_UDF_set_light\" id=\"1239\" inline=\"false\"><value name=\"LIGHT_IDS\"><block type=\"lists_create_with\" id=\"1240\" inline=\"false\"><mutation items=\"1\"></mutation><value name=\"ADD0\"><block type=\"math_number\" id=\"1241\"><field name=\"NUM\">3</field></block></value></block></value><value name=\"COLOR\"><block type=\"text\" id=\"1242\"><field name=\"TEXT\">OFF</field></block></value><next><block type=\"prezi_move_with_channel\" id=\"1243\"><field name=\"CHANNEL\">office_prezi</field><field name=\"STEP\">2</field><next><block type=\"action_sleep\" id=\"1244\" inline=\"false\"><value name=\"VALUE\"><block type=\"math_number\" id=\"1245\"><field name=\"NUM\">8000</field></block></value><next><block type=\"udf_UDF_set_light\" id=\"1246\" inline=\"false\"><value name=\"LIGHT_IDS\"><block type=\"lists_create_with\" id=\"1247\" inline=\"false\"><mutation items=\"2\"></mutation><value name=\"ADD0\"><block type=\"math_number\" id=\"1248\"><field name=\"NUM\">1</field></block></value><value name=\"ADD1\"><block type=\"math_number\" id=\"1249\"><field name=\"NUM\">2</field></block></value></block></value><value name=\"COLOR\"><block type=\"text\" id=\"1250\"><field name=\"TEXT\">OFF</field></block></value><next><block type=\"variables_set\" id=\"1251\" inline=\"true\"><field name=\"VAR\">isworking_robosem</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"1252\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></statement></block><block type=\"procedures_defnoreturn\" id=\"1253\" x=\"47\" y=\"174\"><mutation><arg name=\"res\"></arg></mutation><field name=\"NAME\">check_room</field><statement name=\"STACK\"><block type=\"ros_scheduled_action_check_motion\" id=\"1254\" inline=\"true\"><mutation></mutation><field name=\"ON_RESULT_PARAM\">item</field><field name=\"ON_FEEDBACK_PARAM\">item</field><value name=\"CTX\"><block type=\"variables_get\" id=\"1255\"><field name=\"VAR\">res</field></block></value><value name=\"GOAL\"><block type=\"ros_msg_rocon_ninja_block-CheckMotionGoal\" id=\"1256\" inline=\"false\" collapsed=\"true\"><mutation></mutation><value name=\"DEVICE_NAME\"><block type=\"text\" id=\"1257\"><field name=\"TEXT\"></field></block></value></block></value><statement name=\"ON_RESULT\"><block type=\"action_speak\" id=\"1258\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"1259\"><field name=\"TEXT\">[Welcome] Room checke result</field></block></value><next><block type=\"variables_set\" id=\"1260\" inline=\"true\"><field name=\"VAR\">is_room_empty</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"1261\"><field name=\"BOOL\">FALSE</field></block></value><next><block type=\"controls_if\" id=\"1262\" inline=\"false\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"1263\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"object_item_get\" id=\"1264\"><field name=\"VAR\">item</field><field name=\"KEY\">success</field></block></value><value name=\"B\"><block type=\"logic_boolean\" id=\"1265\"><field name=\"BOOL\">TRUE</field></block></value></block></value><statement name=\"DO0\"><block type=\"controls_forEach\" id=\"1266\" inline=\"false\"><field name=\"VAR\">result</field><value name=\"LIST\"><block type=\"object_item_get\" id=\"1267\"><field name=\"VAR\">item</field><field name=\"KEY\">is_detected</field></block></value><statement name=\"DO\"><block type=\"variables_set\" id=\"1268\" inline=\"true\"><field name=\"VAR\">message</field><value name=\"VALUE\"><block type=\"text\" id=\"1269\"><field name=\"TEXT\">empty</field></block></value><next><block type=\"variables_set\" id=\"1270\" inline=\"true\"><field name=\"VAR\">hue_id</field><value name=\"VALUE\"><block type=\"math_number\" id=\"1271\"><field name=\"NUM\">1</field></block></value><next><block type=\"variables_set\" id=\"1272\" inline=\"true\"><field name=\"VAR\">hue_color</field><value name=\"VALUE\"><block type=\"text\" id=\"1273\"><field name=\"TEXT\">RED</field></block></value><next><block type=\"controls_if\" id=\"1274\" inline=\"false\"><mutation elseif=\"1\" else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"1275\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"object_item_get2\" id=\"1276\" inline=\"true\"><field name=\"VAR\">result</field><value name=\"KEY\"><block type=\"text\" id=\"1277\"><field name=\"TEXT\">key</field></block></value></block></value><value name=\"B\"><block type=\"text\" id=\"1278\"><field name=\"TEXT\">motion_detector</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"1279\" inline=\"true\"><field name=\"VAR\">hue_id</field><value name=\"VALUE\"><block type=\"math_number\" id=\"1280\"><field name=\"NUM\">1</field></block></value></block></statement><value name=\"IF1\"><block type=\"logic_compare\" id=\"1281\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"object_item_get2\" id=\"1282\" inline=\"true\"><field name=\"VAR\">result</field><value name=\"KEY\"><block type=\"text\" id=\"1283\"><field name=\"TEXT\">key</field></block></value></block></value><value name=\"B\"><block type=\"text\" id=\"1284\"><field name=\"TEXT\">motion_detector_2</field></block></value></block></value><statement name=\"DO1\"><block type=\"variables_set\" id=\"1285\" inline=\"true\"><field name=\"VAR\">hue_id</field><value name=\"VALUE\"><block type=\"math_number\" id=\"1286\"><field name=\"NUM\">2</field></block></value></block></statement><statement name=\"ELSE\"><block type=\"action_speak\" id=\"1287\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"1288\"><field name=\"TEXT\">Unknown key</field></block></value><next><block type=\"action_speak\" id=\"1289\" inline=\"false\"><value name=\"VALUE\"><block type=\"object_item_get2\" id=\"1290\" inline=\"true\"><field name=\"VAR\">result</field><value name=\"KEY\"><block type=\"text\" id=\"1291\"><field name=\"TEXT\">key</field></block></value></block></value></block></next></block></statement><next><block type=\"controls_if\" id=\"1292\" inline=\"false\"><mutation elseif=\"1\" else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"1293\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"object_item_get2\" id=\"1294\" inline=\"true\"><field name=\"VAR\">result</field><value name=\"KEY\"><block type=\"text\" id=\"1295\"><field name=\"TEXT\">value</field></block></value></block></value><value name=\"B\"><block type=\"text\" id=\"1296\"><field name=\"TEXT\">True</field></block></value></block></value><statement name=\"DO0\"><block type=\"variables_set\" id=\"1297\" inline=\"true\"><field name=\"VAR\">message</field><value name=\"VALUE\"><block type=\"text\" id=\"1298\"><field name=\"TEXT\">occupied</field></block></value><next><block type=\"variables_set\" id=\"1299\" inline=\"true\"><field name=\"VAR\">hue_color</field><value name=\"VALUE\"><block type=\"text\" id=\"1300\"><field name=\"TEXT\">RED</field></block></value></block></next></block></statement><value name=\"IF1\"><block type=\"logic_compare\" id=\"1301\" inline=\"true\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"object_item_get2\" id=\"1302\" inline=\"true\"><field name=\"VAR\">result</field><value name=\"KEY\"><block type=\"text\" id=\"1303\"><field name=\"TEXT\">value</field></block></value></block></value><value name=\"B\"><block type=\"text\" id=\"1304\"><field name=\"TEXT\">False</field></block></value></block></value><statement name=\"DO1\"><block type=\"variables_set\" id=\"1305\" inline=\"true\"><field name=\"VAR\">is_room_empty</field><value name=\"VALUE\"><block type=\"logic_boolean\" id=\"1306\"><field name=\"BOOL\">TRUE</field></block></value><next><block type=\"variables_set\" id=\"1307\" inline=\"true\"><field name=\"VAR\">message</field><value name=\"VALUE\"><block type=\"text\" id=\"1308\"><field name=\"TEXT\">empty</field></block></value><next><block type=\"variables_set\" id=\"1309\" inline=\"true\"><field name=\"VAR\">hue_color</field><value name=\"VALUE\"><block type=\"text\" id=\"1310\"><field name=\"TEXT\">GREEN</field></block></value></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"action_speak\" id=\"1311\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"1312\"><field name=\"TEXT\">Unknown value</field></block></value><next><block type=\"action_speak\" id=\"1313\" inline=\"false\"><value name=\"VALUE\"><block type=\"object_item_get2\" id=\"1314\" inline=\"true\"><field name=\"VAR\">result</field><value name=\"KEY\"><block type=\"text\" id=\"1315\"><field name=\"TEXT\">value</field></block></value></block></value></block></next></block></statement><next><block type=\"action_speak\" id=\"1316\" inline=\"false\"><value name=\"VALUE\"><block type=\"text_join\" id=\"1317\" inline=\"false\"><mutation items=\"3\"></mutation><value name=\"ADD0\"><block type=\"object_item_get2\" id=\"1318\" inline=\"true\"><field name=\"VAR\">result</field><value name=\"KEY\"><block type=\"text\" id=\"1319\"><field name=\"TEXT\">key</field></block></value></block></value><value name=\"ADD1\"><block type=\"text\" id=\"1320\"><field name=\"TEXT\">: </field></block></value><value name=\"ADD2\"><block type=\"variables_get\" id=\"1321\"><field name=\"VAR\">message</field></block></value></block></value><next><block type=\"udf_UDF_set_light\" id=\"1322\" inline=\"false\"><value name=\"LIGHT_IDS\"><block type=\"lists_create_with\" id=\"1323\" inline=\"false\"><mutation items=\"1\"></mutation><value name=\"ADD0\"><block type=\"variables_get\" id=\"1324\"><field name=\"VAR\">hue_id</field></block></value></block></value><value name=\"COLOR\"><block type=\"variables_get\" id=\"1325\"><field name=\"VAR\">hue_color</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></statement><statement name=\"ELSE\"><block type=\"action_speak\" id=\"1326\" inline=\"false\"><value name=\"VALUE\"><block type=\"text\" id=\"1327\"><field name=\"TEXT\">Room checker failure</field></block></value></block></statement></block></next></block></next></block></statement></block></statement></block></xml>","title":"welcome_without_prezi_wf"}